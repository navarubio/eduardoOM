<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">  
    <h:head>
        <title>Usuarios</title>
        <link href="../recursos/css/estilos.css" rel="stylesheet"/>        
        <link href="../recursos/css/metro-bootstrap.css" rel="stylesheet"/>
        <link href="../recursos/css/iconFont.css" rel="stylesheet"/>
        <script type="text/javascript" src="../recursos/js/calendario.js"></script> 
        <script type="text/javascript">
            $(document).keypress(
                    function (event) {
                        if (event.which == '13') {
                            event.preventDefault();
                        }


                    });
        </script>
    </h:head>
    <h:body>
        #{historiasMB.inicializar()}
        <h:form id="IdFormRegistroClinico">  
            <p:growl id="IdMensajeUsuarios" showDetail="true" sticky="false" autoUpdate="true" life="2000"/>
            <table style="margin-left: auto; margin-right: auto;" >

                <tr><td colspan="2"><h2>FORMATO DE REFERENCIA Y CONTRAREFERENCIA</h2></td></tr>                                


                <!--DATOS DEL ACUDIENTE-->
                <div>
                    <tr><td colspan="2"><h2>DATOS DEL ACUDIENTE</h2></td></tr>         
                    <tr>
                        <td><p:outputLabel value="Nombre" /></td>
                        <td><p:outputLabel value="Dirección" /></td>
                    </tr>
                    <tr>
                        <td><p:inputText  readonly="true" styleClass="width1" value="#{historiasMB.pacienteSeleccionado.acompanante}" /></td> <!--Este campo pen realidad es el acudiente-->
                        <td><p:inputText  readonly="true" styleClass="width1" value="#{historiasMB.pacienteSeleccionado.direccion}" /></td>                    
                    </tr>
                    <tr>
                        <td><p:outputLabel value="Acompañante" /></td>
                        <td><p:outputLabel value="Parentesco" /></td>
                    </tr>
                    <tr>
                        <p:focus for="IdFocus" />
                        <td><p:inputText id="IdFocus" styleClass="width1" value="#{historiasMB.datosFormulario.dato0}" /></td>                    
                        <td>
                            <p:selectOneMenu style="width:320px;" value="#{historiasMB.datosFormulario.dato1}" filter="true" filterMatchMode="contains">
                                <f:selectItem itemLabel="" itemValue=""/>
                                <f:selectItems value="#{aplicacionGeneralMB.listaParentesco}" />
                            </p:selectOneMenu>  
                        </td>                    
                    </tr>

                    <tr>
                        <td><p:outputLabel value="Teléfono" /></td>
                    </tr>
                    <tr>
                        <td><p:inputText  styleClass="width1" value="#{historiasMB.datosFormulario.dato2}" /></td>                    
                    </tr>
                </div>
                <!--FIN DATOS DEL ACUDIENTE-->

                <!--INFORMACIÓN GENERAL-->
                <div>
                    <tr><td colspan="2"><h2>INFORMACIÓN GENERAL</h2></td></tr>         
                    <tr>
                        <td><p:outputLabel value="INSTITUCIÓN" /></td>
                        <td><p:outputLabel value="E.S.E.IO" /></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:inputText readonly="true" styleClass="width1" value="#{historiasMB.loginMB.empresaActual.razonSocial}" /></td>
                        <td colspan="1"><p:inputText readonly="true" styleClass="width1" value="#{historiasMB.loginMB.empresaActual.codMunicipio.descripcion}" />
                            <!--( {historiasMB.loginMB.empresaActual.codDepartamento.descripcion})"/></td>-->    
                        </td>
                    </tr>
                    <tr>
                        <td><p:outputLabel value="ESPECIALIDAD" /></td>
                        <td><p:outputLabel value="NIVEL" /></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:inputText  styleClass="width1" value="#{historiasMB.loginMB.usuarioActual.especialidad.descripcion}" /></td>
                        <td colspan="1"><p:inputText  styleClass="width1" value="#{historiasMB.loginMB.empresaActual.nivel}" /></td>                    
                    </tr>
                    <tr>
                        <td colspan="2"><p:outputLabel value="DIAGNÓSTICO PRINCIPAL" /></td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <p:autoComplete size="100" id="dato3" value="#{historiasMB.datosFormulario.dato3}" completeMethod="#{historiasMB.autocompletarDiagnostico}" forceSelection="true"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2"><p:outputLabel value="DIAGNOSTICO RELACIONADO" /></td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <p:autoComplete size="100" id="dato4" value="#{historiasMB.datosFormulario.dato4}" completeMethod="#{historiasMB.autocompletarDiagnostico}" forceSelection="true"/>
                        </td>                    
                    </tr>
                </div>
                <tr>
                    <td colspan="2">
                        <p:selectOneMenu  value="#{historiasMB.valorDefecto1}" styleClass="campoFormulario">
                            <f:selectItems value="#{historiasMB.listaValoresDefecto}"/>
                        </p:selectOneMenu>  
                        &nbsp;
                        <p:commandButton value="Valor por Defecto" actionListener="#{historiasMB.cambiarValorDefecto(1)}" 
                                         update="dato3 dato4">
                        </p:commandButton>
                    </td>
                </tr>
                <!--FIN ENFOQUE DIFERENCIAL-->

                <tr><td colspan="2"><h2><p:outputLabel value="IMPRESIÓN DIAGNÓSTICA"/></h2></td>                                        
                </tr>
                <tr>
                    <td colspan="2">
                        <p:inputTextarea  id="dato5" styleClass="width2" value="#{historiasMB.datosFormulario.dato5}"/>

                    </td>                    
                </tr>
                <tr>
                    <td colspan="2">
                        <p:selectOneMenu  value="#{historiasMB.valorDefecto2}" styleClass="campoFormulario">
                            <f:selectItems value="#{historiasMB.listaValoresDefecto}"/>
                        </p:selectOneMenu>  
                        &nbsp;
                        <p:commandButton value="Valor por Defecto" actionListener="#{historiasMB.cambiarValorDefecto(2)}" 
                                         update="dato5">
                        </p:commandButton>
                    </td>
                </tr>
                <tr><td colspan="2"><h2><p:outputLabel value="CAUSA DE LA REMISIÓN"/></h2></td>                                        
                </tr>
                <tr>
                    <td colspan="2">
                        <p:inputTextarea id="dato6" styleClass="width2" value="#{historiasMB.datosFormulario.dato6}"/>

                    </td>                    
                </tr>
                <tr>
                    <td colspan="2">
                        <p:selectOneMenu  value="#{historiasMB.valorDefecto3}" styleClass="campoFormulario">
                            <f:selectItems value="#{historiasMB.listaValoresDefecto}"/>
                        </p:selectOneMenu>  
                        &nbsp;
                        <p:commandButton value="Valor por Defecto" actionListener="#{historiasMB.cambiarValorDefecto(3)}" 
                                         update="dato6">
                        </p:commandButton>
                    </td>
                </tr>

                <tr><td colspan="2"><h2>RESUMEN DE HISTORIA CLÍNICA</h2></td></tr>         
                <tr>
                    <td colspan="2"><p:outputLabel value="MOTIVO DE CONSULTA"/></td>                                        
                </tr>
                <tr>
                    <td colspan="2">
                        <p:inputTextarea id="dato7" styleClass="width2" value="#{historiasMB.datosFormulario.dato7}"/>

                    </td>                    
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="ENFERMEDAD ACTUAL"/></td>                                        
                </tr>
                <tr>
                    <td colspan="2">
                        <p:inputTextarea id="dato8" styleClass="width2" value="#{historiasMB.datosFormulario.dato8}"/>

                    </td>                    
                </tr>
                <tr>
                    <td colspan="2">
                        <p:selectOneMenu  value="#{historiasMB.valorDefecto4}" styleClass="campoFormulario">
                            <f:selectItems value="#{historiasMB.listaValoresDefecto}"/>
                        </p:selectOneMenu>  
                        &nbsp;
                        <p:commandButton value="Valor por Defecto" actionListener="#{historiasMB.cambiarValorDefecto(4)}" 
                                         update="dato7 dato8">
                        </p:commandButton>
                    </td>
                </tr>

                <tr><td colspan="2"><h2>ANTECEDENTES</h2></td></tr>         
                <tr>
                    <td colspan="2"><p:outputLabel value="GRUPO SANGUINEO"/></td>                                        
                </tr>
                <tr>
                    <td colspan="2">
                        <p:inputTextarea id="dato9" styleClass="width2" value="#{historiasMB.datosFormulario.dato9}"/>

                    </td>                    
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="REVISION POR SISTEMA"/></td>                                        
                </tr>
                <tr>
                    <td colspan="2">
                        <p:inputTextarea id="dato10" styleClass="width2" value="#{historiasMB.datosFormulario.dato10}"/>

                    </td>                    
                </tr>
                <tr>
                    <td colspan="2">
                        <p:selectOneMenu  value="#{historiasMB.valorDefecto5}" styleClass="campoFormulario">
                            <f:selectItems value="#{historiasMB.listaValoresDefecto}"/>
                        </p:selectOneMenu>  
                        &nbsp;
                        <p:commandButton value="Valor por Defecto" actionListener="#{historiasMB.cambiarValorDefecto(5)}" 
                                         update="dato9 dato10">
                        </p:commandButton>
                    </td>
                </tr>



                <!--SIGNOS VITALES-->
                <div>
                    <tr>
                        <td colspan="2"><h2>SIGNOS VITALES</h2></td>
                    </tr>                
                    <tr>
                        <td><p:outputLabel value="Frecuencia cardiaca"/></td>
                        <td><p:outputLabel value="Frecuencia respiratoria"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato11" styleClass="width1" value="#{historiasMB.datosFormulario.dato11}"/></td>
                        <td><p:inputText id="dato12" styleClass="width1" value="#{historiasMB.datosFormulario.dato12}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Temperatura"/></td>
                        <td colspan="1"><p:outputLabel value="Presión A Sistólica"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato13" styleClass="width1" value="#{historiasMB.datosFormulario.dato13}"/></td>
                        <td><p:inputText id="dato14" styleClass="width1" value="#{historiasMB.datosFormulario.dato14}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Presión A Distólica"/></td>
                        <td colspan="1"><p:outputLabel value="Presión arterial"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato15" styleClass="width1" value="#{historiasMB.datosFormulario.dato15}"/></td>
                        <td><p:inputText id="dato16" styleClass="width1" value="#{historiasMB.datosFormulario.dato16}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Pulso"/></td>
                    </tr>
                    <tr>
                        <td><p:inputText id="dato17" styleClass="width1" value="#{historiasMB.datosFormulario.dato17}"/></td>
                    </tr>    
                </div>
                <tr>
                    <td colspan="2">
                        <p:selectOneMenu  value="#{historiasMB.valorDefecto6}" styleClass="campoFormulario">
                            <f:selectItems value="#{historiasMB.listaValoresDefecto}"/>
                        </p:selectOneMenu>  
                        &nbsp;
                        <p:commandButton value="Valor por Defecto" actionListener="#{historiasMB.cambiarValorDefecto(6)}" 
                                         update="dato11 dato12 dato13 dato14 dato15 dato16 dato17">
                        </p:commandButton>
                    </td>
                </tr>

                <!--Fin de SIGNOS VITALES-->

                <!--EXAMEN FÍSICO-->
                <div>
                    <tr>
                        <td colspan="2"><h2>EXAMEN FÍSICO</h2></td>
                    </tr>                

                    <tr>
                        <td ><p:outputLabel value="Peso (kg)"/></td>
                        <td ><p:outputLabel value="Talla (cm)"/></td>
                    </tr>    
                    <tr>
                        <td ><p:inputText id="dato18" styleClass="width1" value="#{historiasMB.datosFormulario.dato18}">
                                <p:ajax event="change" listener="#{historiasMB.calcularIMCHisRefContraRef}" update="txtImc"/>
                            </p:inputText>
                        </td>
                        <td ><p:inputText id="dato19" styleClass="width1" value="#{historiasMB.datosFormulario.dato19}">
                                <p:ajax event="change" listener="#{historiasMB.calcularIMCHisRefContraRef}" update="txtImc"/>
                            </p:inputText>
                        </td>
                    </tr>
                    <tr>
                        <td ><p:outputLabel value="IMC"/></td>
                        <td ><p:outputLabel value="Sintomatico de piel"/></td>
                    </tr>    
                    <tr>
                        <td ><p:inputText  id="txtImc" readonly="true" styleClass="width1" value="#{historiasMB.datosFormulario.dato20}"/></td>
                        <td ><p:inputText id="dato21" styleClass="width1" value="#{historiasMB.datosFormulario.dato21}"/></td>
                    </tr>
                    <tr>
                        <td ><p:outputLabel value="Sintomatico respiratorio"/></td>
                        <td ><p:outputLabel value="Sindrome febril"/></td>
                    </tr>    

                    <tr>
                        <td><p:inputText id="dato22" styleClass="width1" value="#{historiasMB.datosFormulario.dato22}"/></td>
                        <td><p:inputText id="dato23" styleClass="width1" value="#{historiasMB.datosFormulario.dato23}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Cabeza"/></td>
                        <td colspan="1"><p:outputLabel value="Ojos"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato24" styleClass="width1" value="#{historiasMB.datosFormulario.dato24}"/></td>
                        <td><p:inputText id="dato25" styleClass="width1" value="#{historiasMB.datosFormulario.dato25}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Oidos"/></td>
                        <td colspan="1"><p:outputLabel value="Nariz"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato26" styleClass="width1" value="#{historiasMB.datosFormulario.dato26}"/></td>
                        <td><p:inputText id="dato27" styleClass="width1" value="#{historiasMB.datosFormulario.dato27}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Observaciones"/></td>
                        <td colspan="1"><p:outputLabel value="Otorrinolaringologia"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato28" styleClass="width1" value="#{historiasMB.datosFormulario.dato28}"/></td>
                        <td><p:inputText id="dato29" styleClass="width1" value="#{historiasMB.datosFormulario.dato29}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Cuello"/></td>
                        <td colspan="1"><p:outputLabel value="Torax"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato30" styleClass="width1" value="#{historiasMB.datosFormulario.dato30}"/></td>
                        <td><p:inputText id="dato31" styleClass="width1" value="#{historiasMB.datosFormulario.dato31}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Pulmonar"/></td>
                        <td colspan="1"><p:outputLabel value="Cardiovascular"/></td>
                    </tr>  
                    <tr>
                        <td><p:inputText id="dato32" styleClass="width1" value="#{historiasMB.datosFormulario.dato32}"/></td>
                        <td><p:inputText id="dato33" styleClass="width1" value="#{historiasMB.datosFormulario.dato33}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Perfusión"/></td>
                        <td colspan="1"><p:outputLabel value="Abdomen"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato34" styleClass="width1" value="#{historiasMB.datosFormulario.dato34}"/></td>
                        <td><p:inputText id="dato35" styleClass="width1" value="#{historiasMB.datosFormulario.dato35}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Extremidades"/></td>
                        <td colspan="1"><p:outputLabel value="Sistema musculoesqueletico"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato36" styleClass="width1" value="#{historiasMB.datosFormulario.dato36}"/></td>
                        <td><p:inputText id="dato37" styleClass="width1" value="#{historiasMB.datosFormulario.dato37}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Genitourinario"/></td>
                        <td colspan="1"><p:outputLabel value="Neurológico"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato38" styleClass="width1" value="#{historiasMB.datosFormulario.dato38}"/></td>
                        <td><p:inputText id="dato39" styleClass="width1" value="#{historiasMB.datosFormulario.dato39}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Piel"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato40" styleClass="width1" value="#{historiasMB.datosFormulario.dato40}"/></td>
                    </tr>
                </div>
                <tr>
                    <td colspan="2">
                        <p:selectOneMenu  value="#{historiasMB.valorDefecto7}" styleClass="campoFormulario">
                            <f:selectItems value="#{historiasMB.listaValoresDefecto}"/>
                        </p:selectOneMenu>  
                        &nbsp;
                        <p:commandButton value="Valor por Defecto" actionListener="#{historiasMB.cambiarValorDefecto(7)}" 
                                         update="dato18 dato19 txtImc dato21 dato22 dato23 dato24 dato25 dato26 dato27 dato28 dato29 dato30 dato31 dato32 dato33 dato34 dato35 dato36 dato37 dato38 dato39 dato40">
                        </p:commandButton>
                    </td>
                </tr>
                <!--Fin de EXAMEN FISICO-->

                <!-- EXAMEN MENTAL-->
                <div>
                    <tr>
                        <td colspan="1"><h2>EXAMEN MENTAL</h2></td>
                    </tr>                
                    <tr>
                        <td colspan="1"><p:outputLabel value="Sospecha de maltrato físico"/></td>
                        <td colspan="1"><p:outputLabel value="Sospecha de violencia sexual"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato41" styleClass="width1" value="#{historiasMB.datosFormulario.dato41}"/></td>
                        <td><p:inputText id="dato42" styleClass="width1" value="#{historiasMB.datosFormulario.dato42}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Sospecha de violencia intrafamiliar"/></td>
                        <td colspan="1"><p:outputLabel value="Conducta agresiva o violenta"/></td>
                    </tr>    
                    <tr>
                        <td colspan="1"><p:inputText id="dato43" styleClass="width1" value="#{historiasMB.datosFormulario.dato43}"/></td>
                        <td colspan="1"><p:inputText id="dato44" styleClass="width1" value="#{historiasMB.datosFormulario.dato44}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Sintomatología depresiva"/></td>
                        <td colspan="1"><p:outputLabel value="Sintomatología de ansiedad"/></td>
                    </tr>    
                    <tr>
                        <td colspan="1"><p:inputText id="dato45" styleClass="width1" value="#{historiasMB.datosFormulario.dato45}"/></td>
                        <td colspan="1"><p:inputText id="dato46" styleClass="width1" value="#{historiasMB.datosFormulario.dato46}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Ideas o intento suicida"/></td>
                        <td colspan="1"><p:outputLabel value="Consumo de alcohol sustancias psicoativas"/></td>
                    </tr>    
                    <tr>
                        <td colspan="1">
                            <p:inputText id="dato47" styleClass="width1" value="#{historiasMB.datosFormulario.dato47}"/></td>
                        <td><p:inputText id="dato48" styleClass="width1" value="#{historiasMB.datosFormulario.dato48}"/></td>
                    </tr>
                    <tr>
                        <td colspan="1"><p:outputLabel value="Pensamientos o ideas incoherentes"/></td>
                        <td colspan="1"><p:outputLabel value="Víctima de desplazamiento"/></td>
                    </tr>    
                    <tr>
                        <td><p:inputText id="dato49" styleClass="width1" value="#{historiasMB.datosFormulario.dato49}"/></td>
                        <td><p:inputText id="dato50" styleClass="width1" value="#{historiasMB.datosFormulario.dato50}"/></td>
                    </tr>                
                </div>
                <tr>
                    <td colspan="2">
                        <p:selectOneMenu  value="#{historiasMB.valorDefecto8}" styleClass="campoFormulario">
                            <f:selectItems value="#{historiasMB.listaValoresDefecto}"/>
                        </p:selectOneMenu>  
                        &nbsp;
                        <p:commandButton value="Valor por Defecto" actionListener="#{historiasMB.cambiarValorDefecto(8)}" 
                                         update="dato41 dato42 dato43 dato44 dato45 dato46 dato47 dato48 dato49 dato50">
                        </p:commandButton>
                    </td>
                </tr>
                <!--Fin de riesgo salud mental-->

                <tr>
                    <td colspan="2"> <h2> PLAN </h2> </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <p:inputTextarea id="dato51" rows="5" styleClass="width2" value="#{historiasMB.datosFormulario.dato51}" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <p:selectOneMenu  value="#{historiasMB.valorDefecto9}" styleClass="campoFormulario">
                            <f:selectItems value="#{historiasMB.listaValoresDefecto}"/>
                        </p:selectOneMenu>  
                        &nbsp;
                        <p:commandButton value="Valor por Defecto" actionListener="#{historiasMB.cambiarValorDefecto(9)}" 
                                         update="dato51">
                        </p:commandButton>
                    </td>
                </tr>

                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td colspan="1">
                        <p:outputLabel value="FECHA-HORA REGISTRO"/>
                    </td>
                    <td>
                        <p:outputLabel value="Municipio"/>
                    </td>

                </tr>
                <tr>
                    <td>
                        <p:calendar navigator="true" locale="es" value="#{historiasMB.fechaReg}" pattern="dd/MM/yyyy HH:mm:ss" size="23" mask="true" />
                    </td>
                    <td colspan="1">
                        <p:selectOneMenu  styleClass="campoFormulario" id="IdMunicipios" style="width: 315px;" value="#{historiasMB.datosFormulario.dato55}" filter="true" filterMatchMode="contains">
                            <f:selectItems value="#{historiasMB.listaMunicipios}" />
                        </p:selectOneMenu>
                    </td>  
                </tr>
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td><p:outputLabel value="MEDICO"/></td>
                    <td><p:outputLabel value="ESPECIALIDAD"/></td>
                </tr>
                <tr>
                    <td>
                        <p:selectOneMenu style="width: 315px;" value="#{historiasMB.idPrestador}" filter="true" filterMatchMode="contains">                            
                            <p:ajax event="change" listener="#{historiasMB.cambiaMedico}" update="IdEspecialidad"/>
                            <f:selectItem itemLabel="" itemValue=""/>
                            <f:selectItems value="#{historiasMB.listaPrestadores}" var="p" itemLabel="#{p.primerNombre} #{p.segundoNombre} #{p.primerApellido} #{p.segundoApellido}" itemValue="#{p.idUsuario}"/>
                        </p:selectOneMenu>
                    </td>
                    <td><p:inputText id="IdEspecialidad" readonly="true" styleClass="width1" value="#{historiasMB.especialidadPrestador}"/></td>
                </tr>                
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td colspan="2">
                        <p:commandButton icon="ui-icon-disk" value="Guardar Nuevo Registro" 
                                         actionListener="#{historiasMB.guardarRegistro}" disabled="#{historiasMB.modificandoRegCli}"
                                         update="@form"/>
                        <p:commandButton icon="ui-icon-arrowthickstop-1-s" value="Actualizar Registro" 
                                         actionListener="#{historiasMB.actualizarRegistro}" disabled="#{!historiasMB.modificandoRegCli}"
                                         rendered="#{loginMB.superUsuario}" update="@form"/>
                        <p:commandButton icon="ui-icon-document" value="Limpiar Formulario" 
                                         actionListener="#{historiasMB.btnLimpiarFormulario}" update="@form"/>
                    </td>
                </tr>
            </table>
            <p:dialog id="IdTextosDlgPredefinidos" header="TEXTOS PREDEFINIDOS" width="645" widgetVar="dlgTextosPredefinidos" resizable="false" closable="true" modal="true">                                
                <p:panelGrid styleClass="panelGridSinBordes" id="IdPanelTextosPredefinidos">
                    <p:row>
                        <p:column>
                            <p:outputLabel   styleClass="labelFormulario" style="width: 60px;" value="Categoría: "/>
                            <p:selectOneMenu styleClass="campoFormulario" style="width: 220px;" value="#{historiasMB.idMaestroTextoPredef}" >
                                <f:ajax event="change" listener="#{historiasMB.cambiaMaestro}" render="IdComboTextosPredefinidos IdEditorTextoPredefinido IdNombrePredefinido"/> 
                                <f:selectItem itemLabel="" itemValue=""/>
                                <f:selectItems value="#{historiasMB.listaMaestrosTxtPredefinidos}" var="maestro" itemValue="#{maestro.idMaestro}" itemLabel="#{maestro.nombre}"/>
                            </p:selectOneMenu>
                            <p:outputLabel   styleClass="labelFormulario" style="width: 60px;" value="Predefinidos: "/>
                            <p:selectOneMenu styleClass="campoFormulario" style="width: 220px;" id="IdComboTextosPredefinidos" value="#{historiasMB.idTextoPredef}" >
                                <f:ajax 
                                    event="change"
                                    listener="#{historiasMB.cambiaTextoPredefinido}"                                               
                                    render="IdEditorTextoPredefinido IdNombrePredefinido"/>                                 
                                <f:selectItems value="#{historiasMB.listaTxtPredefinidos}" var="texto" itemValue="#{texto.idTxtPredefinido}" itemLabel="#{texto.nombre}"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel styleClass="labelFormulario" value="Nombre: " style="width: 60px;"/>
                            <p:inputText   styleClass="campoFormulario" id="IdNombrePredefinido" size="39" value="#{historiasMB.nombreTextoPredefinido}"/>                                                    
                            <p:commandButton icon="ui-icon-circle-arrow-s" title="Usar seleccionado"   actionListener="#{historiasMB.usarTextoPredefinido}"/>
                            <p:commandButton icon="ui-icon-disk"          title="Guardar/Actualizar"  actionListener="#{historiasMB.guardarTextoPredefinido}" />            
                            <p:commandButton icon="ui-icon-trash"         title="Eliminar predefinido" id="IdBtnEliminarPredefinido"/>                                        
                            <p:overlayPanel for="IdBtnEliminarPredefinido" widgetVar="opEliminarPredefinido">
                                <p:outputLabel   styleClass="labelFormulario" value="¿Confirma la eliminación?  "/>
                                <p:commandButton value="Si" title="Crear nueva categoría" actionListener="#{historiasMB.eliminarPredefinido}" oncomplete="PF('opEliminarPredefinido').hide();"/>                        
                            </p:overlayPanel> 
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:editor id="IdEditorTextoPredefinido" value="#{historiasMB.detalleTextoPredef}" width="600" controls="bold italic underline font size bullets numbering alignleft center alignright justify undo redo"/>
                        </p:column>
                    </p:row>

                </p:panelGrid>             
            </p:dialog>
        </h:form>        
    </h:body>
</html>